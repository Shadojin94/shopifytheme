{%- comment -%}
Those are the option names for which we automatically detect swatch. For the color, we use them to display a swatch, while
for size, we use it to display a size chart (if applicable)
{%- endcomment -%}

{%- assign color_label = 'color,colour,couleur,colore,farbe,색,色,färg,farve' | split: ',' -%}
{%- assign size_label = 'size,taille,bröße,tamanho,tamaño,koko,サイズ' | split: ',' -%}

{%- assign size_chart_page = '' -%}
{%- assign product_popovers = '' -%}

{%- assign selected_variant = product.selected_or_first_available_variant -%}

{%- form 'product', product, class: 'ProductForm' -%}
  <div class="ProductForm__Variants">
    {%- unless product.has_only_default_variant -%}
      {%- for option in product.options_with_values -%}
        {%- assign downcase_option = option.name | downcase -%}
        {%- capture popover_id -%}popover-{{ product.id }}-{{ section.id }}-{{ option.name | handle }}{%- endcapture -%}

        {%- if section.settings.show_color_swatch and color_label contains downcase_option -%}
          {%- assign is_option_with_color_swatch = true -%}
        {%- else -%}
          {%- assign is_option_with_color_swatch = false -%}
        {%- endif -%}

        <variant-radios class="no-js-hidden" data-section="main-product" data-url="/products/crystal-hair-eraser">
                        
                        
          <fieldset class="js product-form__input  qty_swatch">
            <legend class="form__label">Bundle &amp; Save</legend><input type="radio" id="main-product-1-0" name="Bundle &amp; Save" value="Single" form="product-form-main-product" checked="">
            
            



            <label class="element" for="main-product-1-0">
              <div class="sn_ys">
                <span class="swatch_title">Single</span>

                <span class="eraser_text">1x Eraser</span> 
                

                
              </div>

              <div class="prie_grp">
                <span class="var_price">$39</span>
                       
              </div>
            </label>
            
            
<input type="radio" id="main-product-1-1" name="Bundle &amp; Save" value="Duo" form="product-form-main-product">
            
            

            


            <label class="element" for="main-product-1-1">
              <div class="sn_ys">
                <span class="swatch_title">Duo</span>
                <span class="free-ship-text">Free Shipping</span>
                

                 
                <span class="popular_text"><svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 493.16 272.27"><defs><style>.cls-1{fill:#6e57b2;}.cls-2{fill:url(#linear-gradient);}.cls-3{fill:#fff;}</style><linearGradient id="linear-gradient" x1="3.42" y1="172.17" x2="496.58" y2="172.17" gradientTransform="translate(392.78 -95.7) rotate(83.51)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#8f79d3"></stop><stop offset="0.48" stop-color="#9179d5"></stop><stop offset="1" stop-color="#9179d5"></stop></linearGradient></defs><ellipse class="cls-1" cx="250" cy="180.29" rx="129.87" ry="247.68" transform="translate(39.17 368.2) rotate(-83.51)"></ellipse><ellipse class="cls-2" cx="250" cy="172.17" rx="129.87" ry="247.68" transform="translate(47.24 361) rotate(-83.51)"></ellipse><ellipse class="cls-2" cx="250" cy="172.17" rx="129.87" ry="247.68" transform="translate(47.24 361) rotate(-83.51)"></ellipse><path class="cls-3" d="M140.45,134.31c-.1,5.23.58,8.94,2.71,14.94l-14.38-2.47A31.61,31.61,0,0,0,132,132.86l.7-37.09-19.3,48.37-5.22-.9-18-55.18-.7,37.48a37.35,37.35,0,0,0,2.6,14.93l-9.38-1.62a33,33,0,0,0,3.15-13.93l.7-36.9c.09-4.84-.38-8-2.66-12.11l16.84,2.89a8,8,0,0,0-1.16,4.66,32.22,32.22,0,0,0,1.63,10l12.39,40.12,13.61-35.65a30.61,30.61,0,0,0,2-9.56,8.91,8.91,0,0,0-1-4.84l16.09,2.77c-2.63,3.24-3.11,6.17-3.2,11.11Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M152,126.39c.28-15.1,9.1-23.59,21.57-21.45,13.42,2.31,20.24,15,20,28.8-.28,15-9,23.71-21.58,21.55C158.48,153,151.78,140.05,152,126.39Zm31.6,7.77c.24-12.68-2.84-25-11.26-26.42-6.39-1.1-10.25,5-10.5,18.31-.24,12.78,3,25,11.26,26.42C179.21,153.52,183.38,147.92,183.64,134.16Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M208.79,121c-.09,5,3.28,7.85,9.4,11.72l6.87,4.39c4.33,2.78,9.81,6.83,9.67,14.39-.18,9.49-8.91,13-17.22,11.61a24.55,24.55,0,0,1-18.32-14.72l8.51-3.68c2,8.6,6.79,14.09,13.29,15.21,4.26.73,7.82-.89,7.91-5.63.08-4.17-3.06-7.53-7.82-10.48l-9-5.53c-3.38-2.14-10.45-7-10.31-14.22.14-7.65,6.66-13,20.83-10.6a39.41,39.41,0,0,1,10.84,3.62l-2,12.39c-4-7.88-8.54-12-14.93-13.06C211.89,115.61,208.86,117.33,208.79,121Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M265.86,161.53c-.08,4.45-4.87,9.07-12.12,7.82-6.82-1.17-9.39-6.57-9.24-14.6l.64-33.71-5.76-1,.48-2.73,5.33.91a72.34,72.34,0,0,0-.47-9,55.72,55.72,0,0,0,9.45-2.45l-.24,13,12.47,2.14-.59,2.72-11.93-2-.62,32.63c0,1.75-.13,6.88,5.3,7.81C260.69,163.36,262.63,162.92,265.86,161.53Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M146,197.16l-.12,6.29a49.25,49.25,0,0,0,2.5,16.16l-18.49-3.18a37.9,37.9,0,0,0,3-15.22l.56-29.67A42.2,42.2,0,0,0,131,155.38l21.38,3.68c8.36,1.44,22.9,5.54,22.59,21.88-.27,14.27-12.69,19-27.05,16.54Zm1-35.34c-.28,4-.46,8.11-.53,12l-.38,19.81,2.07.36c8.16,1.4,12.8-3.36,13-14,.21-11.36-4.77-16.55-13-18Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M179.72,201.55c.29-15.31,9.46-23.34,22.68-21.06,12.29,2.11,21.09,13.33,20.81,28.26-.29,15.21-9.46,23.24-22.68,21C188.14,227.58,179.44,216.29,179.72,201.55Zm29.68,8.78c.23-12.3-2.33-24.8-8.53-25.87-5.06-.87-7.14,5.09-7.34,15.51-.23,12.3,2.33,24.7,8.53,25.77C207,226.59,209.2,220.94,209.4,210.33Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M272.75,213.7c-.35,18.21-10.13,26.23-22.11,24.16a13.5,13.5,0,0,1-7.4-3.62l-.11,6.29c-.1,5.07,0,8.76,2.21,14.6l-17.66-3c2.27-5.07,2.54-8.7,2.64-13.77l.61-32.2c.12-6.29.09-10.34-2.09-15.81,4.37-.84,8.74-1.88,13-3a24.64,24.64,0,0,1,2,8.07c3-4.57,8.19-6,13.56-5.1C266.43,191.79,273,199.24,272.75,213.7Zm-13.62,2.64c.25-13.52-3-18.78-8.44-19.72a8.74,8.74,0,0,0-6.76,1.57l-.5,26.47a8.79,8.79,0,0,0,7.08,9C254.64,234.41,258.84,231.27,259.13,216.34Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M307.87,247.06a24.94,24.94,0,0,1-1.93-7.5,14.14,14.14,0,0,1-14.31,5.55c-7.43-1.28-11.48-6.4-11.31-15.23l.31-16.62c.09-4.79.07-8.75-2.11-14.21a149.94,149.94,0,0,0,15.28-2.64l-.64,33.89c-.07,3.66.69,7.47,5.75,8.34a8.28,8.28,0,0,0,7-1.91l.36-19.15c.09-4.7.08-9.78-1.6-14.12a109.5,109.5,0,0,0,14.76-2.74l-.63,33.8a37.43,37.43,0,0,0,2.1,14.77Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M329,236.94l.64-33.61c.1-5.35.08-10.07-2-14.76a79.41,79.41,0,0,0,15.17-2.66l-1,53.23c-.1,5.26,0,8.77,2.11,14.12l-17.55-3C328.62,245.63,328.89,242.2,329,236.94Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M377.58,259.05a16.37,16.37,0,0,1-1.84-6.72,16.18,16.18,0,0,1-14.9,4.6c-7-1.21-11.6-6.05-11.48-12,.14-7.8,8.77-9.33,15.95-10.73,8.11-1.71,10.72-2.67,10.76-4.55l.06-3.48c.11-5.91-.91-11.93-6.9-13-3.51-.6-5.62,1.2-5.69,5.05a23.11,23.11,0,0,0,2.1,9.12l-13.72-3,.05-2.53c.15-8.17,6.49-14.33,19.6-12.08,14.05,2.42,17.61,11.23,17.42,21.65l-.27,13.9c-.13,6.94.11,10.47,2.5,16.06Zm-1.9-9,.19-9.86c0-2-.48-2.43-3.16-2.89-7.75-1.34-10.16.41-10.25,5.2-.08,4.13,2.24,7.36,6.89,8.16A12.1,12.1,0,0,0,375.68,250.06Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M428.88,220.13l-2.47,16.06c-4.33-6.78-7.19-8.87-9.46-9.26-3.83-.66-4.63,3.63-4.78,11.61l-.24,12.2c-.09,5.07.05,8.77,2.22,14.61l-17.66-3c2.27-5.07,2.54-8.7,2.64-13.77l.25-13.43a31,31,0,0,0-3.33-15.73c4.58-1,8.74-2,13-3.32,1.51,2.33,2.66,7.33,3.11,10.52,2.43-7.59,6.49-8.68,12.38-7.67A22,22,0,0,1,428.88,220.13Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M392.32,161.88c0-12.22-5.43-20.54-16.72-20.54,11.29,0,16.72-8.33,16.72-20.54,0,12.21,6.69,20.54,16.72,20.54C399,141.34,392.32,149.66,392.32,161.88Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M166.59,85.88c0-7.23-3.22-12.16-9.9-12.16,6.68,0,9.9-4.92,9.9-12.16,0,7.24,4,12.16,9.9,12.16C170.55,73.72,166.59,78.65,166.59,85.88Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M86.41,217.92c0-7-3.1-11.74-9.56-11.74,6.46,0,9.56-4.75,9.56-11.73,0,7,3.83,11.73,9.56,11.73C90.24,206.18,86.41,210.94,86.41,217.92Z" transform="translate(-3.42 -40.09)"></path><path class="cls-3" d="M279.49,288.44c0-9.66-4.3-16.25-13.23-16.25,8.93,0,13.23-6.59,13.23-16.25,0,9.66,5.3,16.25,13.23,16.25C284.79,272.19,279.49,278.78,279.49,288.44Z" transform="translate(-3.42 -40.09)"></path></svg></span>

                
                <div class="swtch_you_save">You save $11</div> 
                
              </div>

              <div class="prie_grp">
                <span class="var_price">$67</span>
                
                <span class="var_prce">
                  <s class="var_com_price">$78</s> 
                </span>
                       
              </div>
            </label>
            
            
<input type="radio" id="main-product-1-2" name="Bundle &amp; Save" value="Trio" form="product-form-main-product">
            
            

            
            


            <label class="element" for="main-product-1-2">
              <div class="sn_ys">
                <span class="swatch_title">Trio</span>
                <span class="free-ship-text">Free Shipping</span>
                

                 
                

                
                <div class="swtch_you_save">You save $29</div> 
                
              </div>

              <div class="prie_grp">
                <span class="var_price">$88</span>
                
                <span class="var_prce">
                  <s class="var_com_price">$117</s> 
                </span>
                       
              </div>
            </label>
            
            
</fieldset><script type="application/json">
        [{"id":41175756308655,"title":"Single","option1":"Single","option2":null,"option3":null,"sku":"BLM1","requires_shipping":true,"taxable":true,"featured_image":{"id":32895646433455,"product_id":7105770193071,"position":1,"created_at":"2022-02-09T22:41:03-08:00","updated_at":"2022-02-09T22:41:06-08:00","alt":null,"width":3160,"height":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266","variant_ids":[41175756308655,41175756341423,41175756374191]},"available":true,"name":"Crystal Hair Eraser - Single","public_title":"Single","options":["Single"],"price":3900,"weight":0,"compare_at_price":0,"inventory_management":"shopify","barcode":"","featured_media":{"alt":null,"id":25225257582767,"position":1,"preview_image":{"aspect_ratio":1.0,"height":3160,"width":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266"}},"requires_selling_plan":false,"selling_plan_allocations":[]},{"id":41175756341423,"title":"Duo","option1":"Duo","option2":null,"option3":null,"sku":"BLM2","requires_shipping":true,"taxable":true,"featured_image":{"id":32895646433455,"product_id":7105770193071,"position":1,"created_at":"2022-02-09T22:41:03-08:00","updated_at":"2022-02-09T22:41:06-08:00","alt":null,"width":3160,"height":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266","variant_ids":[41175756308655,41175756341423,41175756374191]},"available":true,"name":"Crystal Hair Eraser - Duo","public_title":"Duo","options":["Duo"],"price":6700,"weight":0,"compare_at_price":7800,"inventory_management":"shopify","barcode":"","featured_media":{"alt":null,"id":25225257582767,"position":1,"preview_image":{"aspect_ratio":1.0,"height":3160,"width":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266"}},"requires_selling_plan":false,"selling_plan_allocations":[]},{"id":41175756374191,"title":"Trio","option1":"Trio","option2":null,"option3":null,"sku":"BLM3","requires_shipping":true,"taxable":true,"featured_image":{"id":32895646433455,"product_id":7105770193071,"position":1,"created_at":"2022-02-09T22:41:03-08:00","updated_at":"2022-02-09T22:41:06-08:00","alt":null,"width":3160,"height":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266","variant_ids":[41175756308655,41175756341423,41175756374191]},"available":true,"name":"Crystal Hair Eraser - Trio","public_title":"Trio","options":["Trio"],"price":8800,"weight":0,"compare_at_price":11700,"inventory_management":"shopify","barcode":"","featured_media":{"alt":null,"id":25225257582767,"position":1,"preview_image":{"aspect_ratio":1.0,"height":3160,"width":3160,"src":"https:\/\/cdn.shopify.com\/s\/files\/1\/0609\/1531\/8959\/products\/IMG_9234.jpg?v=1644475266"}},"requires_selling_plan":false,"selling_plan_allocations":[]}]
      </script>
    </variant-radios>

        <div class="ProductForm__Option">
          <button type="button" class="ProductForm__Item" aria-expanded="false" aria-controls="{{ popover_id }}">
            {%- if is_option_with_color_swatch -%}
              {%- assign downcase_value = option.selected_value | downcase -%}

              <span class="ProductForm__ColorSwatch {% if downcase_value == 'white' %}ProductForm__ColorSwatch--white{% endif %}" style="background-color: {{ option.selected_value | replace: ' ', '' }}; background-image: url({{ option.selected_value | handle | append: '.png' | asset_url }})"></span>
              <span class="ProductForm__SelectedValue">{{ option.selected_value }}</span>
              <span class="ProductForm__OptionCount Text--subdued">{{ 'product.form.colors_count' | t: count: option.values.size }}</span>
            {%- else -%}
              <span class="ProductForm__OptionName">{{ option.name }}: <span class="ProductForm__SelectedValue">{{ option.selected_value }}</span></span>
            {%- endif -%}

            {%- include 'icon' with 'select-arrow' -%}
          </button>

          {%- capture popover_html -%}
            {%- if color_label contains downcase_option and section.settings.show_color_carousel -%}
              {%- for value in option.values -%}
                {%- if value == option.selected_value -%}
                  {%- assign initial_image_index = forloop.index0 -%}
                  {%- break -%}
                {%- endif -%}
              {%- endfor -%}

              {%- capture flickity_options -%}
              {
                "prevNextButtons": true,
                "pageDots": true,
                "initialIndex": {{ initial_image_index }},
                "arrowShape": {"x0": 20, "x1": 60, "y1": 40, "x2": 60, "y2": 35, "x3": 25}
              }
              {%- endcapture -%}

              <div id="{{ popover_id }}" class="VariantSelector" aria-hidden="true">
                {%- capture option_index -%}option{{ option.position }}{%- endcapture -%}

                <div class="VariantSelector__Carousel Carousel" data-flickity-config='{{ flickity_options }}'>
                  {%- for value in option.values -%}
                    {%- for variant in product.variants -%}
                      {%- if variant[option_index] == value -%}
                        {%- assign variant_image = variant.image | default: product.featured_image -%}
                        {%- break -%}
                      {%- endif -%}
                    {%- endfor -%}

                    <div class="VariantSelector__Item Carousel__Cell {% if value == option.selected_value %}is-selected{% endif %}"
                         {% if is_option_with_color_swatch %}
                           data-background-color="{{ value | split: ' ' | last | handle }}"
                           data-background-image="{{ value | handle | append: '.png' | asset_url }}"
                         {% endif %}
                         data-option-position="{{ option.position }}"
                         data-option-value="{{ value | escape }}">
                      <div class="VariantSelector__ImageWrapper AspectRatio AspectRatio--withFallback" style="max-width: {{ variant_image.width }}px; padding-bottom: {{ 100.0 | divided_by: variant_image.aspect_ratio }}%; --aspect-ratio: {{ variant_image.aspect_ratio }}">
                        {%- include 'image-size', sizes: '200,400,600,800', image: variant_image -%}
                        {%- assign image_url = variant_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}

                        <img class="VariantSelector__Image Image--lazyLoad Image--fadeIn" data-src="{{ image_url }}" data-widths="[{{ supported_sizes }}]" data-sizes="auto" alt="{{ variant_image.alt | escape }}">
                        <span class="Image__Loader"></span>
                      </div>
                    </div>
                  {%- endfor -%}
                </div>

                <div class="VariantSelector__Info">
                  <div class="VariantSelector__ChoiceList">
                    {%- for value in option.values -%}
                      {%- assign available_prices_for_option_value = '' -%}

                      {%- for variant in product.variants -%}
                        {%- if variant[option_index] == value -%}
                          {%- assign available_prices_for_option_value = available_prices_for_option_value | append: variant.price | append: ',' -%}
                        {%- endif -%}
                      {%- endfor -%}

                      {%- assign available_prices_for_option_value = available_prices_for_option_value | split: ',' | compact | uniq | sort -%}

                      <div class="VariantSelector__Choice {% if value == option.selected_value %}is-selected{% endif %}">
                        <div class="VariantSelector__ChoiceColor">
                          {%- if is_option_with_color_swatch -%}
                            {%- assign downcase_value = value | downcase -%}
                            <span class="VariantSelector__ColorSwatch {% if downcase_value == 'white' %}VariantSelector__ColorSwatch--white{% endif %}" style="background-color: {{ value | replace: ' ', '' }}; background-image: url({{ value | handle | append: '.png' | asset_url }})"></span>
                          {%- endif -%}

                          <span class="VariantSelector__ChoiceValue">{{ value }}</span>
                        </div>

                        <div class="VariantSelector__ChoicePrice">
                          {%- if available_prices_for_option_value.size > 1 -%}
                            {%- capture formatted_min_price -%}<span data-money-convertible>{{ available_prices_for_option_value.first | money_without_trailing_zeros }}</span>{%- endcapture -%}
                            {%- capture formatted_max_price -%}<span data-money-convertible>{{ available_prices_for_option_value.last | money_without_trailing_zeros }}</span>{%- endcapture -%}
                            <span class="Heading Text--subdued">{{ 'product.form.from_price_html' | t: min_price: formatted_min_price, max_price: formatted_max_price }}</span>
                          {%- else -%}
                            <span class="Heading Text--subdued" data-money-convertible>{{ available_prices_for_option_value.first | money_without_trailing_zeros }}</span>
                          {%- endif -%}
                        </div>
                      </div>
                    {%- endfor -%}
                  </div>

                  <button type="button" class="VariantSelector__Button Button Button--primary Button--full" data-action="select-variant">{{- 'product.form.select_model' | t -}}</button>
                </div>
              </div>
            {%- else -%}
              <div id="{{ popover_id }}" class="OptionSelector Popover Popover--withMinWidth" aria-hidden="true">
                <header class="Popover__Header">
                  <button type="button" class="Popover__Close Icon-Wrapper--clickable" data-action="close-popover">{% include 'icon' with 'close' %}</button>
                  <span class="Popover__Title Heading u-h4">{{ option.name | escape }}</span>
                </header>

                <div class="Popover__Content">
                  <div class="Popover__ValueList" data-scrollable>
                    {%- for value in option.values -%}
                      <button type="button" class="Popover__Value {% if value == option.selected_value %}is-selected{% endif %} Heading Link Link--primary u-h6"
                              data-value="{{ value | escape }}"
                              data-option-position="{{ option.position }}"
                              {% if is_option_with_color_swatch %}
                                data-background-color="{{ value | replace: ' ', '' }}"
                                data-background-image="{{ value | handle | append: '.png' | asset_url }}"
                              {% endif %}
                              data-action="select-value">
                        {{- value | escape -}}
                      </button>
                    {%- endfor -%}
                  </div>

                  {%- assign size_chart_page_handle = settings.size_chart_page | default: 'size-chart' -%}
                  {%- assign size_chart_page = pages[size_chart_page_handle] -%}

                  {%- if size_label contains downcase_option and size_chart_page != empty -%}
                    <button type="button" class="Popover__FooterHelp Heading Link Link--primary Text--subdued u-h6" data-action="open-modal" aria-controls="modal-{{ size_chart_page.handle }}">
                      {{- 'product.form.size_chart' | t -}}
                    </button>
                  {%- endif -%}
                </div>
              </div>
            {%- endif -%}
          {%- endcapture -%}

          {%- assign product_popovers = product_popovers | append: popover_html -%}
        </div>
      {%- endfor -%}

      <div class="no-js ProductForm__Option">
        <div class="Select Select--primary">
          {%- include 'icon' with 'select-arrow' -%}

          <select id="product-select-{{ product.id }}" name="id" title="Variant">
            {%- for variant in product.variants -%}
              <option {% if variant == selected_variant %}selected="selected"{% endif %} {% unless variant.available %}disabled="disabled"{% endunless %} value="{{ variant.id }}" data-sku="{{ variant.sku }}">{{ variant.title }} - {{ variant.price | money }}</option>
            {%- endfor -%}
          </select>
        </div>
      </div>
    {%- else -%}
      <input type="hidden" name="id" data-sku="{{ selected_variant.sku }}" value="{{ selected_variant.id }}">
    {%- endunless -%}

    {%- if section.settings.show_quantity_selector -%}
      <div class="ProductForm__QuantitySelector">
        <div class="QuantitySelector QuantitySelector--large">
          {%- assign quantity_minus_one = line_item.quantity | minus: 1 -%}

          <span class="QuantitySelector__Button Link Link--secondary" data-action="decrease-quantity">{% include 'icon' with 'minus' %}</span>
          <input type="text" class="QuantitySelector__CurrentQuantity" pattern="[0-9]*" name="quantity" value="1">
          <span class="QuantitySelector__Button Link Link--secondary" data-action="increase-quantity">{% include 'icon' with 'plus' %}</span>
        </div>
      </div>
    {%- else -%}
      <input type="hidden" name="quantity" value="1">
    {%- endif -%}

    {%- if section.settings.show_inventory_quantity -%}
      {%- assign hide_inventory_quantity_by_default = false -%}
      
      {%- if selected_variant.inventory_management == blank or selected_variant.inventory_quantity <= 0 -%}
        {%- assign hide_inventory_quantity_by_default = true -%}
      {%- endif -%}

      {%- if section.settings.inventory_quantity_threshold != 0 and selected_variant.inventory_quantity > section.settings.inventory_quantity_threshold -%}
        {%- assign hide_inventory_quantity_by_default = true -%}
      {%- endif -%}

      <p class="ProductForm__Inventory Text--subdued" {% if hide_inventory_quantity_by_default %}style="display: none"{% endif %}>
        {%- if section.settings.inventory_quantity_threshold == 0 -%}
          {{- 'product.form.inventory_quantity_count' | t: count: selected_variant.inventory_quantity -}}
        {%- else -%}
          {{- 'product.form.low_inventory_quantity_count' | t: count: selected_variant.inventory_quantity -}}
        {%- endif -%}
      </p>
    {%- endif -%}
  </div>

  {%- comment -%}
  --------------------------------------------------------------------------------------------------------------------
  ADD TO CART BUTTON
  --------------------------------------------------------------------------------------------------------------------
  {%- endcomment -%}

  <button type="submit" class="ProductForm__AddToCart Button {% if selected_variant.available and section.settings.show_payment_button == false %}Button--primary{% else %}Button--secondary{% endif %} Button--full" {% if selected_variant.available %}data-action="add-to-cart"{% else %}disabled="disabled"{% endif %}>
    {%- if selected_variant.available -%}
      <span>{% if product.template_suffix == 'pre-order' %}{{ 'product.form.pre_order' | t }}{% else %}{{ 'product.form.add_to_cart' | t }}{% endif %}</span>
      <span class="Button__SeparatorDot"></span>
      <span data-money-convertible>{{ selected_variant.price | money_without_trailing_zeros }}</span>
    {%- else -%}
      {{- 'product.form.sold_out' | t -}}
    {%- endif -%}
  </button>

  {%- if section.settings.show_payment_button -%}
    {{ form | payment_button }}
  {%- endif -%}
{%- endform -%}

{%- if size_chart_page != empty -%}
  {%- comment -%}If we have a size chart we capture the modal content (it must be displayed outside the form for proper positioning){%- endcomment -%}

  {%- capture product_modals -%}
    <div id="modal-{{ size_chart_page.handle }}" class="Modal Modal--dark Modal--fullScreen Modal--pageContent" aria-hidden="true" role="dialog" data-scrollable>
      <header class="Modal__Header">
        <h2 class="Modal__Title Heading u-h1">{{ size_chart_page.title }}</h2>
      </header>

      <div class="Modal__Content Rte">
        <div class="Container Container--extraNarrow">
          {{- size_chart_page.content -}}
        </div>
      </div>

      <button class="Modal__Close RoundButton RoundButton--large" data-animate-bottom data-action="close-modal">{% include 'icon' with 'close' %}</button>
    </div>
  {%- endcapture -%}
{%- endif -%}

{%- if section.settings.show_payment_button and selected_variant.available == false -%}
  <style>
    #shopify-section-{{ section.id }} .shopify-payment-button {
      display: none;
    }
  </style>
{%- endif -%}

{% comment %}
------------------------------------------------------------------------------
Product Data. This must be outputted for all products (including home page).

IMPORTANT: THIS CODE IS VITAL. DO NOT EDIT IT NOT REMOVE IT. MAKE SURE TO KEEP
THE EXACT SAME ATTRIBUTES.
------------------------------------------------------------------------------
{% endcomment %}

<script type="application/json" data-product-json>
  {
    "product": {{ product | json }},
    "selected_variant_id": {{ selected_variant.id }}
    {%- if section.settings.show_inventory_quantity -%}
      ,"inventories": {
        {%- for variant in product.variants -%}
          {%- assign inventory_message = '' -%}

          {%- if section.settings.inventory_quantity_threshold == 0 -%}
            {%- capture inventory_message -%}{{- 'product.form.inventory_quantity_count' | t: count: variant.inventory_quantity -}}{%- endcapture -%}
          {%- else -%}
            {%- capture inventory_message -%}{{- 'product.form.low_inventory_quantity_count' | t: count: variant.inventory_quantity -}}{%- endcapture -%}
          {%- endif -%}

          "{{ variant.id }}": {
            "inventory_management": {{ variant.inventory_management | json }},
            "inventory_policy": {{ variant.inventory_policy | json }},
            "inventory_quantity": {{ variant.inventory_quantity | json }},
            "inventory_message": {{ inventory_message | json }}
          }{% unless forloop.last %},{% endunless %}
        {%- endfor -%}
      }
    {%- endif -%}
  }
</script>